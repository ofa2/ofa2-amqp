{"version":3,"file":"bundle.esm.js","sources":["../src/index.js"],"sourcesContent":["import _ from 'lodash';\nimport Promise from 'bluebird';\nimport amqp from 'amqp';\n\nexport default function lift() {\n  let amqpConfig = _.get(framework, 'config.connections.amqp');\n\n  const connection = amqp.createConnection(amqpConfig);\n\n  connection.on('error', (e) => {\n    framework.log.warn(e);\n    process.exit(1);\n  });\n\n  return new Promise((resolve) => {\n    connection.on('ready', () => {\n      framework.amqpConnection = connection;\n\n      resolve();\n    });\n  })\n    .timeout(10000)\n    .catch(Promise.TimeoutError, () => {\n      framework.log.warn(new Error('mq connect timeout'));\n      process.exit(1);\n    });\n}\n"],"names":["lift","amqpConfig","_","get","framework","connection","amqp","createConnection","on","e","log","warn","exit","Promise","resolve","amqpConnection","timeout","catch","TimeoutError","Error"],"mappings":";;;;AAIe,SAASA,IAAT,GAAgB;MACzBC,aAAaC,EAAEC,GAAF,CAAMC,SAAN,EAAiB,yBAAjB,CAAjB;;QAEMC,aAAaC,KAAKC,gBAAL,CAAsBN,UAAtB,CAAnB;aAEWO,EAAX,CAAc,OAAd,EAAwBC,CAAD,IAAO;cAClBC,GAAV,CAAcC,IAAd,CAAmBF,CAAnB;YACQG,IAAR,CAAa,CAAb;GAFF;SAKO,IAAIC,OAAJ,CAAaC,OAAD,IAAa;eACnBN,EAAX,CAAc,OAAd,EAAuB,MAAM;gBACjBO,cAAV,GAA2BV,UAA3B;;KADF;GADK,EAOJW,OAPI,CAOI,KAPJ,EAQJC,KARI,CAQEJ,QAAQK,YARV,EAQwB,MAAM;cACvBR,GAAV,CAAcC,IAAd,CAAmB,IAAIQ,KAAJ,CAAU,oBAAV,CAAnB;YACQP,IAAR,CAAa,CAAb;GAVG,CAAP;;;;;"}